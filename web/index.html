

<!--<!DOCTYPE html>-->
<!--<html>-->
<!--<head>-->

<!--    <base href="$FLUTTER_BASE_HREF">-->

<!--    <meta charset="UTF-8">-->
<!--    <meta content="IE=Edge" http-equiv="X-UA-Compatible">-->
<!--    <meta name="description" content="Trainer Section Web App">-->

<!--    &lt;!&ndash; iOS meta tags & icons &ndash;&gt;-->
<!--    <meta name="mobile-web-app-capable" content="yes">-->
<!--    <meta name="apple-mobile-web-app-status-bar-style" content="black">-->
<!--    <meta name="apple-mobile-web-app-title" content="trainer_section">-->
<!--    <link rel="apple-touch-icon" href="icons/Icon-192.png">-->

<!--    &lt;!&ndash; Favicon &ndash;&gt;-->
<!--    <link rel="icon" type="image/png" href="favicon.png"/>-->

<!--    <title>Trainer Section</title>-->
<!--    <link rel="manifest" href="manifest.json">-->
<!--</head>-->
<!--<body>-->

<!--&lt;!&ndash; ===== Firebase & FCM initialization ===== &ndash;&gt;-->
<!--<script type="module">-->
<!--    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";-->
<!--    import {-->
<!--      getMessaging,-->
<!--      getToken,-->
<!--      deleteToken,-->
<!--      onMessage-->
<!--    } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-messaging.js";-->


<!--    const firebaseConfig = {-->
<!--      apiKey: "AIzaSyBrBrrP8RmHbdj0CA9aXhonShhB10k0ryo",-->
<!--      authDomain: "graduationproject-3d3b0.firebaseapp.com",-->
<!--      projectId: "graduationproject-3d3b0",-->
<!--      storageBucket: "graduationproject-3d3b0.firebasestorage.app",-->
<!--      messagingSenderId: "425903761784",-->
<!--      appId: "1:425903761784:web:ce5370b117d9b6a78f808d"-->
<!--    };-->

<!--    //  Firebase App Ùˆ Messaging-->
<!--    const app = initializeApp(firebaseConfig);-->
<!--    const messaging = getMessaging(app);-->

<!--    (async () => {-->
<!--      // 1) ØªØ³Ø¬ÙŠÙ„ Service Worker-->
<!--      if (!('serviceWorker' in navigator)) {-->
<!--        console.error('ðŸš« Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Service Workers');-->
<!--        return;-->
<!--      }-->
<!--      const reg = await navigator.serviceWorker.register('firebase-messaging-sw.js');-->
<!--      console.log('âœ… Service Worker Ù…Ø³Ø¬Ù‘Ù„:', reg);-->

<!--      // 2) Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª-->
<!--      const perm = await Notification.requestPermission();-->
<!--      if (perm !== 'granted') {-->
<!--        console.error('ðŸš« ØªÙ… Ø±ÙØ¶ Ø¥Ø°Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª');-->
<!--        return;-->
<!--      }-->

<!--      // 3) ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ· Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ«Ø¨ÙŠØª Ø§Ù„Ù€ SW-->
<!--      await new Promise(res => setTimeout(res, 500));-->

<!--      // 4) Ø­Ø°Ù Ø£ÙŠ ØªÙˆÙƒÙ† FCM Ù‚Ø¯ÙŠÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ù„ÙƒÙ† ÙŠØ­Ù„ Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ù…Ø²Ø¯ÙˆØ¬)-->
<!--      try {-->
<!--        await deleteToken(messaging);-->
<!--        console.log('ðŸ—‘ï¸ ØªÙ… Ø­Ø°Ù FCM token Ø§Ù„Ù‚Ø¯ÙŠÙ…');-->
<!--      } catch (e) {-->
<!--        console.warn('âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ FCM token Ù‚Ø¯ÙŠÙ… Ù„Ù„Ø­Ø°Ù Ø£Ùˆ Ø­Ø¯Ø« Ø®Ø·Ø£:', e);-->
<!--      }-->

<!--      // 5) Ø¬Ù„Ø¨ Ø§Ù„ØªÙˆÙƒÙ† Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙˆØªÙ…Ø±ÙŠØ± Service Worker registration-->
<!--      const currentToken = await getToken(messaging, {-->
<!--        vapidKey: 'BMUIu0ik_OZJ9r9n3GPXib5fouwP02aKUqHBPJZFio406nmC_henlk7OtEco9fc5xd7Q3q_tZM0RuP6oBBPqTPc',-->
<!--        serviceWorkerRegistration: reg-->
<!--      });-->
<!--      console.log('ðŸ”‘ FCM Token:', currentToken);-->
<!--      // TODO: Ø£Ø±Ø³Ù„ Ù‡Ø°Ø§ Ø§Ù„ØªÙˆÙƒÙ† Ø¥Ù„Ù‰ Ø§Ù„Ù€ backend Ù„Ø­ÙØ¸Ù‡ ØªØ­Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…-->

<!--      // 6) Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù€ foreground-->
<!--      onMessage(messaging, payload => {-->
<!--        console.log('ðŸ“¬ Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø±Ø¯Ø© (foreground):', payload);-->
<!--        // Ù…Ø«Ø§Ù„: Ø¹Ø±Ø¶ SnackBar Ø£Ùˆ Notification API Ù‡Ù†Ø§-->
<!--      });-->
<!--    })().catch(err => console.error('Firebase init error:', err));-->
<!--</script>-->

<!--&lt;!&ndash; ===== Flutter web bootstrap ===== &ndash;&gt;-->
<!--<script src="flutter_bootstrap.js" async></script>-->
<!--</body>-->
<!--</html>-->












<!DOCTYPE html>
<html>
<head>
    <base href="$FLUTTER_BASE_HREF">
    <meta charset="UTF-8">
    <title>Trainer Section</title>
    <link rel="manifest" href="manifest.json">
</head>
<body>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
    import { isSupported } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-messaging.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBrBrrP8RmHbdj0CA9aXhonShhB10k0ryo",
      authDomain: "graduationproject-3d3b0.firebaseapp.com",
      projectId: "graduationproject-3d3b0",
      storageBucket: "graduationproject-3d3b0.firebasestorage.app",
      messagingSenderId: "425903761784",
      appId: "1:425903761784:web:ce5370b117d9b6a78f808d"
    };

    // Firebase init
    const app = initializeApp(firebaseConfig);

    (async () => {
      const supported = await isSupported();
      console.log("isSupported:", supported);
      if (!supported) return;

      if (!('serviceWorker' in navigator)) {
        console.error("ðŸš« Ø§Ù„Ù…ØªØµÙÙ‘Ø­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Service Workers");
        return;
      }

      // âœ… Ø³Ø¬Ù‘Ù„ Ø§Ù„Ù€ SW Ø¨Ù…Ø³Ø§Ø± Ù…Ø·Ù„Ù‚ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ù€ scope Ù…Ù† Ø§Ù„Ø¬Ø°Ø±
      const reg = await navigator.serviceWorker.register('/firebase-messaging-sw.js');
      console.log("âœ… SW registered. scope:", reg.scope);

      // âœ… Ø§Ù†ØªØ¸Ø± Ø­ØªÙ‰ ÙŠØµØ¨Ø­ SW Ø¬Ø§Ù‡Ø²Ù‹Ø§
      await navigator.serviceWorker.ready;

      // âœ… Ø§Ø·Ù„Ø¨ Ø¥Ø°Ù† Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙÙ‚Ø· (Ø¨Ø¯ÙˆÙ† getToken Ù‡Ù†Ø§)
      const perm = await Notification.requestPermission();
      console.log("Notification permission:", perm);
    })().catch(e => console.error("Firebase init failed:", e));
</script>

<script src="flutter_bootstrap.js" async></script>
</body>
</html>
